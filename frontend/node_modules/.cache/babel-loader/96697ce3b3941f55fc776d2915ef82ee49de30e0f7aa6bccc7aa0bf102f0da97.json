{"ast":null,"code":"// frontend/src/api.js\nconst API_URL = \"http://localhost:8000\"; // make sure backend is running here\n\nasync function request(path, opts = {}) {\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\n  return fetch(url, opts);\n}\n\n// ----- AUTH -----\nexport async function login(email, password) {\n  // FastAPI OAuth2 token endpoint may expect form-encoded. If your backend has /login that accepts form,\n  // switch headers/body accordingly; the login component below posts JSON to /login ; adjust if needed.\n  const res = await request(\"/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (!res.ok) {\n    const t = await res.text().catch(() => null);\n    throw new Error(t || \"Login failed\");\n  }\n  const data = await res.json();\n  if (data.access_token) {\n    localStorage.setItem(\"access_token\", data.access_token);\n  }\n  return data;\n}\nexport async function registerUser(name, email, password) {\n  const res = await request(\"/register\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  });\n  if (!res.ok) {\n    const t = await res.text().catch(() => null);\n    throw new Error(t || \"Registration failed\");\n  }\n  return res.json();\n}\n\n// Generic auth fetch helper (so Profile page can call authenticated endpoints)\nexport async function authFetch(path, opts = {}) {\n  const token = localStorage.getItem(\"access_token\");\n  const headers = opts.headers ? {\n    ...opts.headers\n  } : {};\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n  const res = await request(path, {\n    ...opts,\n    headers\n  });\n  if (!res.ok) {\n    const txt = await res.text().catch(() => null);\n    throw new Error(txt || `Request failed ${res.status}`);\n  }\n  return res.json();\n}\n\n// ----- JOBS -----\nexport async function fetchJobs() {\n  // get jobs from backend alias that we normalized: /api/jobs/jobright\n  return authFetch(\"/api/jobs/jobright\");\n}\n\n// ----- PROFILE -----\nexport async function fetchProfile() {\n  return authFetch(\"/profile\");\n}\nexport async function saveProfile(data) {\n  return authFetch(\"/profile\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n}\n\n// ----- LOGOUT helper -----\nexport function logout() {\n  localStorage.removeItem(\"access_token\");\n}","map":{"version":3,"names":["API_URL","request","path","opts","url","startsWith","fetch","login","email","password","res","method","headers","body","JSON","stringify","ok","t","text","catch","Error","data","json","access_token","localStorage","setItem","registerUser","name","authFetch","token","getItem","txt","status","fetchJobs","fetchProfile","saveProfile","logout","removeItem"],"sources":["C:/Users/yamun/Downloads/Pro-Ject/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\r\nconst API_URL = \"http://localhost:8000\"; // make sure backend is running here\r\n\r\nasync function request(path, opts = {}) {\r\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\r\n  return fetch(url, opts);\r\n}\r\n\r\n// ----- AUTH -----\r\nexport async function login(email, password) {\r\n  // FastAPI OAuth2 token endpoint may expect form-encoded. If your backend has /login that accepts form,\r\n  // switch headers/body accordingly; the login component below posts JSON to /login ; adjust if needed.\r\n  const res = await request(\"/login\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password })\r\n  });\r\n  if (!res.ok) {\r\n    const t = await res.text().catch(() => null);\r\n    throw new Error(t || \"Login failed\");\r\n  }\r\n  const data = await res.json();\r\n  if (data.access_token) {\r\n    localStorage.setItem(\"access_token\", data.access_token);\r\n  }\r\n  return data;\r\n}\r\n\r\nexport async function registerUser(name, email, password) {\r\n  const res = await request(\"/register\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ name, email, password })\r\n  });\r\n  if (!res.ok) {\r\n    const t = await res.text().catch(() => null);\r\n    throw new Error(t || \"Registration failed\");\r\n  }\r\n  return res.json();\r\n}\r\n\r\n// Generic auth fetch helper (so Profile page can call authenticated endpoints)\r\nexport async function authFetch(path, opts = {}) {\r\n  const token = localStorage.getItem(\"access_token\");\r\n  const headers = opts.headers ? { ...opts.headers } : {};\r\n  if (token) {\r\n    headers[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n  const res = await request(path, { ...opts, headers });\r\n  if (!res.ok) {\r\n    const txt = await res.text().catch(() => null);\r\n    throw new Error(txt || `Request failed ${res.status}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\n// ----- JOBS -----\r\nexport async function fetchJobs() {\r\n  // get jobs from backend alias that we normalized: /api/jobs/jobright\r\n  return authFetch(\"/api/jobs/jobright\");\r\n}\r\n\r\n// ----- PROFILE -----\r\nexport async function fetchProfile() {\r\n  return authFetch(\"/profile\");\r\n}\r\n\r\nexport async function saveProfile(data) {\r\n  return authFetch(\"/profile\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\n\r\n// ----- LOGOUT helper -----\r\nexport function logout() {\r\n  localStorage.removeItem(\"access_token\");\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}