{"ast":null,"code":"// // frontend/src/api.js\n\n// const API_URL = \"http://localhost:8000\";\n\n// // Universal helper\n// async function request(path, opts = {}) {\n//   const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\n//   return fetch(url, opts);\n// }\n\n// // ------------------ AUTH ------------------\n\n// export async function login(email, password) {\n//   const res = await request(\"/api/auth/login\", {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ email, password }),\n//   });\n\n//   const data = await res.json();\n\n//   if (!res.ok) throw new Error(data.detail || \"Login failed\");\n\n//   // FIX → Store token consistently\n//   localStorage.setItem(\"access_token\", data.access_token);\n\n//   return data;\n// }\n\n// export async function registerUser(name, email, password) {\n//   const res = await request(\"/api/auth/register\", {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ name, email, password }),\n//   });\n\n//   const data = await res.json();\n//   if (!res.ok) throw new Error(data.detail || \"Registration failed\");\n\n//   return data;\n// }\n\n// // ------------------ AUTH FETCH ------------------\n\n// export async function authFetch(path, opts = {}) {\n//   const token = localStorage.getItem(\"access_token\");\n\n//   const headers = opts.headers ? { ...opts.headers } : {};\n//   if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n\n//   const res = await request(path, { ...opts, headers });\n//   if (!res.ok) throw new Error(`Request failed: ${res.status}`);\n\n//   return res.json();\n// }\n\n// // ------------------ JOBS ------------------\n\n// export function fetchJobs() {\n//   return authFetch(\"/api/jobs/jobright\");\n// }\n\n// // ------------------ PROFILE ------------------\n\n// export function fetchProfile() {\n//   return authFetch(\"/api/profile\");\n// }\n\n// export function saveProfile(data) {\n//   return authFetch(\"/api/profile\", {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(data),\n//   });\n// }\n\n// export function logout() {\n//   localStorage.removeItem(\"access_token\");\n// }\n\n// frontend/src/api.js\nconst API_URL = \"http://localhost:8000\";\nasync function request(path, opts = {}) {\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\n  return fetch(url, opts);\n}\n\n// -------------- AUTH --------------\nexport async function login(email, password) {\n  const res = await request(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) {\n    const txt = await res.text().catch(() => null);\n    throw new Error(txt || \"Login failed\");\n  }\n  localStorage.setItem(\"token\", data.access_token);\n  return data;\n}\nexport async function registerUser(name, email, password) {\n  const res = await request(\"/api/auth/register\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  });\n  if (!res.ok) {\n    const txt = await res.text().catch(() => null);\n    throw new Error(txt || \"Registration failed\");\n  }\n  return res.json();\n}\nexport function logout() {\n  localStorage.removeItem(\"token\");\n}\n\n// Generic authenticated fetch\nexport async function authFetch(path, opts = {}) {\n  const token = localStorage.getItem(\"token\");\n  const headers = opts.headers ? {\n    ...opts.headers\n  } : {};\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n  const res = await request(path, {\n    ...opts,\n    headers\n  });\n  if (!res.ok) {\n    const txt = await res.text().catch(() => null);\n    // throw error with message so frontend can show\n    throw new Error(txt || `Request failed ${res.status}`);\n  }\n  return res.json();\n}\n\n// Jobs\nexport async function fetchJobs() {\n  return authFetch(\"/api/jobs/jobright\");\n}\n\n// Profile\nexport async function fetchProfile() {\n  return authFetch(\"/api/profile/\");\n}\nexport async function saveProfile(data) {\n  return authFetch(\"/api/profile/update\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n}\nexport const fetchMatchedJobs = async () => {\n  const response = await fetch(\"http://localhost:8000/api/jobs/matched\", {\n    method: \"GET\",\n    credentials: \"include\"\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to load matched jobs\");\n  }\n  return await response.json();\n};","map":{"version":3,"names":["API_URL","request","path","opts","url","startsWith","fetch","login","email","password","res","method","headers","body","JSON","stringify","data","json","ok","txt","text","catch","Error","localStorage","setItem","access_token","registerUser","name","logout","removeItem","authFetch","token","getItem","status","fetchJobs","fetchProfile","saveProfile","fetchMatchedJobs","response","credentials"],"sources":["C:/Users/yamun/Downloads/Pro-Ject/frontend/src/api.js"],"sourcesContent":["// // frontend/src/api.js\r\n\r\n// const API_URL = \"http://localhost:8000\";\r\n\r\n// // Universal helper\r\n// async function request(path, opts = {}) {\r\n//   const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\r\n//   return fetch(url, opts);\r\n// }\r\n\r\n// // ------------------ AUTH ------------------\r\n\r\n// export async function login(email, password) {\r\n//   const res = await request(\"/api/auth/login\", {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ email, password }),\r\n//   });\r\n\r\n//   const data = await res.json();\r\n\r\n//   if (!res.ok) throw new Error(data.detail || \"Login failed\");\r\n\r\n//   // FIX → Store token consistently\r\n//   localStorage.setItem(\"access_token\", data.access_token);\r\n\r\n//   return data;\r\n// }\r\n\r\n// export async function registerUser(name, email, password) {\r\n//   const res = await request(\"/api/auth/register\", {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ name, email, password }),\r\n//   });\r\n\r\n//   const data = await res.json();\r\n//   if (!res.ok) throw new Error(data.detail || \"Registration failed\");\r\n\r\n//   return data;\r\n// }\r\n\r\n// // ------------------ AUTH FETCH ------------------\r\n\r\n// export async function authFetch(path, opts = {}) {\r\n//   const token = localStorage.getItem(\"access_token\");\r\n\r\n//   const headers = opts.headers ? { ...opts.headers } : {};\r\n//   if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n//   const res = await request(path, { ...opts, headers });\r\n//   if (!res.ok) throw new Error(`Request failed: ${res.status}`);\r\n\r\n//   return res.json();\r\n// }\r\n\r\n// // ------------------ JOBS ------------------\r\n\r\n// export function fetchJobs() {\r\n//   return authFetch(\"/api/jobs/jobright\");\r\n// }\r\n\r\n// // ------------------ PROFILE ------------------\r\n\r\n// export function fetchProfile() {\r\n//   return authFetch(\"/api/profile\");\r\n// }\r\n\r\n// export function saveProfile(data) {\r\n//   return authFetch(\"/api/profile\", {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify(data),\r\n//   });\r\n// }\r\n\r\n// export function logout() {\r\n//   localStorage.removeItem(\"access_token\");\r\n// }\r\n\r\n// frontend/src/api.js\r\nconst API_URL = \"http://localhost:8000\";\r\n\r\nasync function request(path, opts = {}) {\r\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\r\n  return fetch(url, opts);\r\n}\r\n\r\n// -------------- AUTH --------------\r\nexport async function login(email, password) {\r\n  const res = await request(\"/api/auth/login\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) {\r\n    const txt = await res.text().catch(() => null);\r\n    throw new Error(txt || \"Login failed\");\r\n  }\r\n  localStorage.setItem(\"token\", data.access_token);\r\n  return data;\r\n}\r\n\r\n\r\nexport async function registerUser(name, email, password) {\r\n  const res = await request(\"/api/auth/register\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ name, email, password }),\r\n  });\r\n  if (!res.ok) {\r\n    const txt = await res.text().catch(() => null);\r\n    throw new Error(txt || \"Registration failed\");\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(\"token\");\r\n}\r\n\r\n// Generic authenticated fetch\r\nexport async function authFetch(path, opts = {}) {\r\n  const token = localStorage.getItem(\"token\");\r\n  const headers = opts.headers ? { ...opts.headers } : {};\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n  const res = await request(path, { ...opts, headers });\r\n  if (!res.ok) {\r\n    const txt = await res.text().catch(() => null);\r\n    // throw error with message so frontend can show\r\n    throw new Error(txt || `Request failed ${res.status}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\n// Jobs\r\nexport async function fetchJobs() {\r\n  return authFetch(\"/api/jobs/jobright\");\r\n}\r\n\r\n// Profile\r\nexport async function fetchProfile() {\r\n  return authFetch(\"/api/profile/\");\r\n}\r\nexport async function saveProfile(data) {\r\n  return authFetch(\"/api/profile/update\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\n\r\nexport const fetchMatchedJobs = async () => {\r\n  const response = await fetch(\"http://localhost:8000/api/jobs/matched\", {\r\n    method: \"GET\",\r\n    credentials: \"include\",\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to load matched jobs\");\r\n  }\r\n\r\n  return await response.json();\r\n};\r\n"],"mappings":"AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAMA,OAAO,GAAG,uBAAuB;AAEvC,eAAeC,OAAOA,CAACC,IAAI,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;EACtC,MAAMC,GAAG,GAAGF,IAAI,CAACG,UAAU,CAAC,MAAM,CAAC,GAAGH,IAAI,GAAG,GAAGF,OAAO,GAAGE,IAAI,EAAE;EAChE,OAAOI,KAAK,CAACF,GAAG,EAAED,IAAI,CAAC;AACzB;;AAEA;AACA,OAAO,eAAeI,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAC3C,MAAMC,GAAG,GAAG,MAAMT,OAAO,CAAC,iBAAiB,EAAE;IAC3CU,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP,KAAK;MAAEC;IAAS,CAAC;EAC1C,CAAC,CAAC;EACF,MAAMO,IAAI,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,CAAC;EAC7B,IAAI,CAACP,GAAG,CAACQ,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMT,GAAG,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;IAC9C,MAAM,IAAIC,KAAK,CAACH,GAAG,IAAI,cAAc,CAAC;EACxC;EACAI,YAAY,CAACC,OAAO,CAAC,OAAO,EAAER,IAAI,CAACS,YAAY,CAAC;EAChD,OAAOT,IAAI;AACb;AAGA,OAAO,eAAeU,YAAYA,CAACC,IAAI,EAAEnB,KAAK,EAAEC,QAAQ,EAAE;EACxD,MAAMC,GAAG,GAAG,MAAMT,OAAO,CAAC,oBAAoB,EAAE;IAC9CU,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEY,IAAI;MAAEnB,KAAK;MAAEC;IAAS,CAAC;EAChD,CAAC,CAAC;EACF,IAAI,CAACC,GAAG,CAACQ,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMT,GAAG,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;IAC9C,MAAM,IAAIC,KAAK,CAACH,GAAG,IAAI,qBAAqB,CAAC;EAC/C;EACA,OAAOT,GAAG,CAACO,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,SAASW,MAAMA,CAAA,EAAG;EACvBL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;AAClC;;AAEA;AACA,OAAO,eAAeC,SAASA,CAAC5B,IAAI,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;EAC/C,MAAM4B,KAAK,GAAGR,YAAY,CAACS,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMpB,OAAO,GAAGT,IAAI,CAACS,OAAO,GAAG;IAAE,GAAGT,IAAI,CAACS;EAAQ,CAAC,GAAG,CAAC,CAAC;EACvD,IAAImB,KAAK,EAAEnB,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUmB,KAAK,EAAE;EACvD,MAAMrB,GAAG,GAAG,MAAMT,OAAO,CAACC,IAAI,EAAE;IAAE,GAAGC,IAAI;IAAES;EAAQ,CAAC,CAAC;EACrD,IAAI,CAACF,GAAG,CAACQ,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMT,GAAG,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,IAAI,CAAC;IAC9C;IACA,MAAM,IAAIC,KAAK,CAACH,GAAG,IAAI,kBAAkBT,GAAG,CAACuB,MAAM,EAAE,CAAC;EACxD;EACA,OAAOvB,GAAG,CAACO,IAAI,CAAC,CAAC;AACnB;;AAEA;AACA,OAAO,eAAeiB,SAASA,CAAA,EAAG;EAChC,OAAOJ,SAAS,CAAC,oBAAoB,CAAC;AACxC;;AAEA;AACA,OAAO,eAAeK,YAAYA,CAAA,EAAG;EACnC,OAAOL,SAAS,CAAC,eAAe,CAAC;AACnC;AACA,OAAO,eAAeM,WAAWA,CAACpB,IAAI,EAAE;EACtC,OAAOc,SAAS,CAAC,qBAAqB,EAAE;IACtCnB,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACC,IAAI;EAC3B,CAAC,CAAC;AACJ;AAEA,OAAO,MAAMqB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,MAAMC,QAAQ,GAAG,MAAMhC,KAAK,CAAC,wCAAwC,EAAE;IACrEK,MAAM,EAAE,KAAK;IACb4B,WAAW,EAAE;EACf,CAAC,CAAC;EAEF,IAAI,CAACD,QAAQ,CAACpB,EAAE,EAAE;IAChB,MAAM,IAAII,KAAK,CAAC,6BAA6B,CAAC;EAChD;EAEA,OAAO,MAAMgB,QAAQ,CAACrB,IAAI,CAAC,CAAC;AAC9B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}