{"ast":null,"code":"// frontend/src/api.js\n\nconst API_URL = \"http://localhost:8000\";\n\n// Universal helper\nasync function request(path, opts = {}) {\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\n  return fetch(url, opts);\n}\n\n// ------------------ AUTH ------------------\n\nexport async function login(email, password) {\n  const res = await request(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.detail || \"Login failed\");\n\n  // FIX → Store token consistently\n  localStorage.setItem(\"access_token\", data.access_token);\n  return data;\n}\nexport async function registerUser(name, email, password) {\n  const res = await request(\"/api/auth/register\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.detail || \"Registration failed\");\n  return data;\n}\n\n// ------------------ AUTH FETCH ------------------\n\nexport async function authFetch(path, opts = {}) {\n  const token = localStorage.getItem(\"access_token\");\n  const headers = opts.headers ? {\n    ...opts.headers\n  } : {};\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n  const res = await request(path, {\n    ...opts,\n    headers\n  });\n  if (!res.ok) throw new Error(`Request failed: ${res.status}`);\n  return res.json();\n}\n\n// ------------------ JOBS ------------------\n\nexport function fetchJobs() {\n  return authFetch(\"/api/jobs/jobright\");\n}\n\n// ------------------ PROFILE ------------------\n\nexport function fetchProfile() {\n  return authFetch(\"/api/profile\");\n}\nexport function saveProfile(data) {\n  return authFetch(\"/api/profile\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n}\nexport function logout() {\n  localStorage.removeItem(\"access_token\");\n}","map":{"version":3,"names":["API_URL","request","path","opts","url","startsWith","fetch","login","email","password","res","method","headers","body","JSON","stringify","data","json","ok","Error","detail","localStorage","setItem","access_token","registerUser","name","authFetch","token","getItem","status","fetchJobs","fetchProfile","saveProfile","logout","removeItem"],"sources":["C:/Users/yamun/Downloads/Pro-Ject/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\r\n\r\nconst API_URL = \"http://localhost:8000\";\r\n\r\n// Universal helper\r\nasync function request(path, opts = {}) {\r\n  const url = path.startsWith(\"http\") ? path : `${API_URL}${path}`;\r\n  return fetch(url, opts);\r\n}\r\n\r\n// ------------------ AUTH ------------------\r\n\r\nexport async function login(email, password) {\r\n  const res = await request(\"/api/auth/login\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n\r\n  const data = await res.json();\r\n\r\n  if (!res.ok) throw new Error(data.detail || \"Login failed\");\r\n\r\n  // FIX → Store token consistently\r\n  localStorage.setItem(\"access_token\", data.access_token);\r\n\r\n  return data;\r\n}\r\n\r\nexport async function registerUser(name, email, password) {\r\n  const res = await request(\"/api/auth/register\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ name, email, password }),\r\n  });\r\n\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.detail || \"Registration failed\");\r\n\r\n  return data;\r\n}\r\n\r\n// ------------------ AUTH FETCH ------------------\r\n\r\nexport async function authFetch(path, opts = {}) {\r\n  const token = localStorage.getItem(\"access_token\");\r\n\r\n  const headers = opts.headers ? { ...opts.headers } : {};\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n\r\n  const res = await request(path, { ...opts, headers });\r\n  if (!res.ok) throw new Error(`Request failed: ${res.status}`);\r\n\r\n  return res.json();\r\n}\r\n\r\n// ------------------ JOBS ------------------\r\n\r\nexport function fetchJobs() {\r\n  return authFetch(\"/api/jobs/jobright\");\r\n}\r\n\r\n// ------------------ PROFILE ------------------\r\n\r\nexport function fetchProfile() {\r\n  return authFetch(\"/api/profile\");\r\n}\r\n\r\nexport function saveProfile(data) {\r\n  return authFetch(\"/api/profile\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(\"access_token\");\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}